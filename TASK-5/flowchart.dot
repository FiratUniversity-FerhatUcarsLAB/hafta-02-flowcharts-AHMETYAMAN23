digraph AkilliEvGuvenlik {
    rankdir=TB;
    node [fontname="Arial", style=rounded];

    // --- BaÅŸlangÄ±Ã§ ---
    start [label="BaÅŸla", shape=oval, style=filled, fillcolor=lightblue];

    // --- BaÅŸlatma adÄ±mlarÄ± ---
    init [label="SensÃ¶rleri TanÄ±mla\n(hareket, Ä±ÅŸÄ±k, duman, sÄ±caklÄ±k, kamera)", shape=box];
    aktif [label="Sistem Aktif ve Ä°zleme Modunda", shape=box];

    // --- Sonsuz dÃ¶ngÃ¼ ---
    dongu [label="ANA DÃ–NGÃœ (while DOÄžRU)", shape=oval, style=filled, fillcolor=lightyellow];
    sensor_okuma [label="TÃ¼m sensÃ¶rleri oku", shape=parallelogram];
    tehdit_sifir [label="tehditSeviyesi = 0", shape=box];

    // --- Tehdit tespiti ---
    hareket_kontrol [label="Hareket var mÄ±?", shape=diamond];
    duman_kontrol [label="Duman veya Ä±sÄ± > 50Â°C var mÄ±?", shape=diamond];
    kamera_kontrol [label="Kamera: YabancÄ± kiÅŸi tespit edildi mi?", shape=diamond];

    // --- Tehdit seviyesi deÄŸerlendirme ---
    tehdit_deger [label="Tehdit Seviyesi Belirle", shape=box];
    seviye_kontrol [label="Tehdit Seviyesi", shape=diamond];

    // --- FarklÄ± tehdit dÃ¼zeyleri ---
    guvenli [label="ðŸŒ™ GÃ¼venli Durum\nAlarm KapalÄ±", shape=box];
    dusuk [label="âš ï¸ DÃ¼ÅŸÃ¼k Tehdit (Hareket AlgÄ±landÄ±)", shape=box];
    orta [label="ðŸš¨ Orta Tehdit (Duman / YÃ¼ksek IsÄ±)\nAlarm Ã‡al, Bildirim GÃ¶nder", shape=box];
    yuksek [label="ðŸš¨ðŸš¨ YÃ¼ksek Tehdit (YabancÄ± KiÅŸi)\nAlarm + Kamera KaydÄ± + Bildirim", shape=box];

    // --- Alarm sÄ±fÄ±rlama ---
    alarm_kontrol [label="Alarm Durumu 'AÃ‡IK' mÄ±?", shape=diamond];
    reset_kontrol [label="KullanÄ±cÄ± 'SIFIRLA' komutu girdi mi?", shape=diamond];
    alarm_reset [label="ðŸ”• Alarm SÄ±fÄ±rla\nSistemi Ä°zleme Moduna Al", shape=box];
    alarm_aktif [label="â³ Alarm Aktif, Ä°zleme Devam", shape=box];

    // --- DÃ¶ngÃ¼ tekrarÄ± ---
    bekle [label="Bekle(5 saniye)", shape=box];
    loop_back [label="Yeni SensÃ¶r Verisi Oku", shape=box];

    // --- AkÄ±ÅŸ baÄŸlantÄ±larÄ± ---
    start -> init -> aktif -> dongu;
    dongu -> sensor_okuma -> tehdit_sifir;
    tehdit_sifir -> hareket_kontrol;

    hareket_kontrol -> duman_kontrol [label="Evet\n(+1)"];
    hareket_kontrol -> duman_kontrol [label="HayÄ±r"];
    duman_kontrol -> kamera_kontrol [label="Evet\n(+2)"];
    duman_kontrol -> kamera_kontrol [label="HayÄ±r"];
    kamera_kontrol -> tehdit_deger [label="Evet\n(+3)"];
    kamera_kontrol -> tehdit_deger [label="HayÄ±r"];

    tehdit_deger -> seviye_kontrol;

    seviye_kontrol -> guvenli [label="0"];
    seviye_kontrol -> dusuk [label="1"];
    seviye_kontrol -> orta [label="2"];
    seviye_kontrol -> yuksek [label="3+"];

    guvenli -> alarm_kontrol;
    dusuk -> alarm_kontrol;
    orta -> alarm_kontrol;
    yuksek -> alarm_kontrol;

    alarm_kontrol -> reset_kontrol [label="Evet"];
    alarm_kontrol -> bekle [label="HayÄ±r"];

    reset_kontrol -> alarm_reset [label="Evet"];
    reset_kontrol -> alarm_aktif [label="HayÄ±r"];

    alarm_reset -> bekle;
    alarm_aktif -> bekle;

    bekle -> loop_back -> dongu;
}
